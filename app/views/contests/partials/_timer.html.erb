<script>
<% t = @contest.end_time %>
end = new Date(<%= t.year %>, <%= t.month %>, <%= t.day %>, <%= t.hour %>, <%= t.min %> )
increaseTime = function(){
  now = new Date()
  // console.log("end time >>")
  // console.log({end: end})
  // console.log("now time >>")
  // console.log({now:now})
  var calc = new Date(end-now);
  var flag = false;
  // console.log(calc.getUTCFullYear() - 1970 + "年");
  flag = flag || calc.getUTCFullYear() - 1970 <= 0
  $('div#year')[0].textContent = (calc.getUTCFullYear() - 1970 <= 0 ? '' : calc.getUTCFullYear() - 1970 + '年')
  // console.log(calc.getUTCMonth() - 1 + "カ月");
  flag = flag || calc.getUTCMonth() - 1 <= 0
  $('div#month')[0].textContent = (calc.getUTCMonth() - 1 > 0 ? calc.getUTCMonth() - 1 + 'ヶ月' : '')
  // console.log(calc.getUTCDate() + "日");
  flag = flag || calc.getUTCDate() <= 0
  $('div#day')[0].textContent = (calc.getUTCDate() - 1 > 0 ? calc.getUTCDate() - 1 + '日' : '')

  if(flag)
  $('div#title')[0].textContent = '投票終了まで'
  // console.log(calc.getUTCHours() + "時間");
  $('div#hour')[0].textContent = calc.getUTCHours()
  // console.log(calc.getUTCMinutes() + "分");
  $('div#min')[0].textContent = calc.getUTCMinutes()
  // console.log(calc.getUTCSeconds() + "秒");
  $('div#sec')[0].textContent = calc.getUTCSeconds()
}
increaseTime()
setInterval(increaseTime, 1000);
</script>